# Stage 07 - Tech Specs

Create detailed technical specifications that translate architecture designs into implementation-ready documents, covering API contracts, database migrations, frontend/backend specs, testing strategies, and security requirements.

## Instructions

### 1. Context Review

Read all the files below to understand the design of this project so far:

- `ideas.md`
- `00-init-ideas/` - All markdown files
- `01-market-research/` - All markdown files
- `02-personas/` - All markdown files
- `03-mvp/` - All markdown files
- `04-prd/` - All markdown files
- `05-ux/` - All markdown files
- `06-architecture/` - All markdown files and Mermaid diagrams

### 2. Create Stage Proposal

Create the file `07-tech-specs/README.md` with the following content:

#### 2.1 Stage Goal

Brief the goal of this stage in 2-3 paragraphs:
- What this stage aims to achieve
- Why detailed technical specifications are critical before development begins
- How this stage bridges architecture design (stage 06) with actual implementation (stage 09 sprints)
- What deliverables will be produced

#### 2.2 File Selection

Pick and list the file names from the options below that are most suitable for this project:

**Overview & Strategy:**
- `tech-specs-overview.md` - Technical specifications overview summarizing all technical decisions and specifications
- `testing-strategy.md` - Comprehensive testing strategy covering unit, integration, and e2e testing approaches
- `error-handling.md` - Error handling strategy defining error codes, messages, and recovery patterns

**API Specifications:**
- `api-specifications.md` - Detailed API specifications including request/response formats, authentication, and rate limiting
- `openapi.yaml` - OpenAPI/Swagger specification for REST APIs (machine-readable)

**Database Specifications:**
- `database-migrations.md` - Database migration strategy including versioning, rollback procedures, and data seeding

**Frontend Specifications:**
- `frontend-specs.md` - Frontend technical specs covering language, framework, coding standards, and repository structure
- `state-management-strategy.md` - How the frontend handles state (e.g., Bloc/Provider for Flutter, Redux/Context for React)

**Backend Specifications:**
- `backend-specs.md` - Backend technical specs covering language, framework, coding standards, and repository structure
- `service-specs/` - Individual service specifications folder containing:
  - `auth-service.md` - Authentication service specification
  - `payment-service.md` - Payment service specification
  - Other service specs as needed based on architecture

**Dependencies & Integrations:**
- `dependencies-list.md` - Comprehensive list of planned pip/npm/dart/flutter packages with versions
- `third-party-integration-guide.md` - Third-party integration specifications and API usage guides

**Security & Performance:**
- `security-specifications.md` - Security implementation details including encryption, authentication flows, and data protection
- `performance-specs.md` - Performance requirements including response times, throughput, and resource limits

**Observability:**
- `observability-spec.md` - Observability specifications covering logging, metrics, tracing, and alerting

For each selected file, provide:
- Short description of what the file contains
- Why it's essential for this specific project
- What key information it should include

**Note:** Select files based on project complexity, architecture decisions, and tech stack. Not all files may be necessary for every project.

#### 2.3 Request User Approval

Present the stage plan to the user and ask - Please check the Stage Proposal file in file `07-tech-specs/README.md`, and update it directly or tell me how to update it

### 3. Execute Stage Plan

Once the user updates & approves the plan in `07-tech-specs/README.md`, read the file and understand user's update for the next step:

#### 3.1 Create All Planned Files

Create each file listed in the approved README.md within the `07-tech-specs/` folder:

- **For `.md` files:** Write comprehensive, implementation-ready specifications based on architecture decisions
- **For `.yaml` files:** Create valid OpenAPI/Swagger specifications following the OpenAPI 3.0+ standard
- **For `service-specs/` folder:** Create individual service specification files as identified in the architecture

**Quality Guidelines:**
- Ensure all specifications are consistent with architecture decisions from stage 06
- API specifications must include request/response examples, error codes, and authentication requirements
- Database migrations must reference the schema design from architecture stage
- Frontend/backend specs must align with chosen tech stack and coding standards
- Testing strategy must cover all critical paths identified in PRD
- Security specifications must address all security requirements from architecture
- All specs should be detailed enough for developers to implement without ambiguity
- Include code examples where applicable (API request/response, error handling patterns)
- Reference relevant design patterns and best practices

#### 3.2 Request User Approval for Files

After creating all files, present them to the user:
- Provide a summary of what was created
- Highlight key technical decisions documented
- Note any assumptions or areas requiring clarification
- Ask: "Please review the technical specifications. You can update or delete the files or let me know how to do it"

### 4. Finalize Stage

Once the user approves all files, you need to check all the files content, and if any files have been deleted understand the user's intent:

#### 4.1 Documentation Finalization
- Sync with `07-tech-specs/README.md` to remove any deleted files which the user doesn't want to have
- Ensure all files are complete, consistent, and well-formatted
- Verify that specifications align with architecture decisions
- Confirm API specifications are complete and follow OpenAPI standards
- Check that all service specs are consistent with each other
- Validate that security and testing strategies are comprehensive

#### 4.2 Prepare for Next Stage
- Summarize key technical specifications for reference in DevOps setup (stage 08)
- Identify infrastructure requirements derived from the specs
- Note any dependencies on external services or tools
- List environment variables and configuration needs for CI/CD setup

#### 4.3 Announce Completion
Inform the user:
- "Stage 07 (Tech Specs) is complete"
- Summary of deliverables created
- Key technical decisions documented
- "Ready to proceed to Stage 08 (DevOps) when you are"

## Role Communication

Based on the stage context and project details, pick up your roles from `dev-swarm/docs/dev-swarm-roles.md` to announce your actions before performing them using the following format:

**As a {Role} [and {Role}, ...], I will {action description}**

## Communication Pattern

This communication pattern ensures:
- **Transparency** - Users know exactly what you're doing and why
- **Human-in-the-loop oversight** - Users can intervene at key decision points
- **Role clarity** - Clear understanding of which expertise is being applied
- **Traceability** - Easy to track which role made which decisions

Always announce your role and action before:
- Reading and analyzing documents
- Creating new files or documents
- Making recommendations or decisions
- Requesting user approval
- Finalizing deliverables
