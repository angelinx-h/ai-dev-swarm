# Stage 04 - PRD (Product Requirements Document)

Create a comprehensive Product Requirements Document that defines the complete product behavior, including functional requirements, non-functional requirements, user flows, acceptance criteria, and all technical specifications needed to guide development.

## Instructions

### 1. Context Review

Read all the files below to understand the design of this project so far:

- `ideas.md`
- `00-init-ideas/` - All markdown files
- `01-market-research/` - All markdown files
- `02-personas/` - All markdown files
- `03-mvp/` - All markdown files

### 2. Create Stage Proposal

Create the file `04-prd/README.md` with the following content:

#### 2.1 Stage Goal

Brief the goal of this stage in 2-3 paragraphs:
- What this stage aims to achieve
- Why a comprehensive PRD is critical for successful product development
- How this stage builds upon previous stages (init-ideas, market-research, personas, and MVP)
- What deliverables will be produced

#### 2.2 File Selection

Pick and list the file names from the options below that are most suitable for this project:

**Core Requirements:**
- `functional-requirements.md` - Detailed functional requirements describing what the system must do
- `non-functional-requirements.md` - Performance, security, scalability, availability, and other quality attributes

**User Experience & Flows:**
- `user-flows.mmd` - Mermaid diagrams showing complete user interaction flows and decision paths

**Quality & Validation:**
- `acceptance-criteria.md` - Clear, testable criteria for each feature that defines "done"
- `error-handling-and-edge-cases.md` - How the system handles errors, exceptions, and boundary conditions

**Data & Analytics:**
- `analytics-and-events.md` - Events to track, metrics to collect, and analytics requirements

**Compliance & Legal:**
- `compliance-and-legal-notes.md` - Regulatory requirements, data protection, and legal considerations

**Dependencies:**
- `dependencies.md` - External services, APIs, and third-party integrations required

For each selected file, provide:
- Short description of what the file contains
- Why it's essential for this specific project
- What key information it should include

**Note:** Select files based on project complexity and type. Not all files may be necessary for every project.

#### 2.3 Request User Approval

Present the stage plan to the user and ask - Please check the Stage Proposal file in file `04-prd/README.md`, and update it directly or tell me how to update it

### 3. Execute Stage Plan

Once the user updates & approves the plan in `04-prd/README.md`, read the file and understand user's update for the next step:

#### 3.1 Create All Planned Files

Create each file listed in the approved README.md within the `04-prd/` folder:

- **For `.md` files:** Write comprehensive, well-structured content based on insights from all previous stages
- **For `.mmd` files:** Create clear Mermaid diagrams (user flows, state diagrams) using appropriate syntax

**Quality Guidelines:**
- Base requirements on personas, user stories, and MVP scope from previous stages
- Write functional requirements that are specific, measurable, and testable
- Define non-functional requirements with quantifiable targets (e.g., "page load < 2 seconds")
- Ensure acceptance criteria use clear Given/When/Then or similar format
- Map user flows to personas and user stories
- Include both happy path and error scenarios in user flows
- Identify all external dependencies and integration points
- Consider GDPR, accessibility, and other compliance requirements where applicable
- Cross-reference requirements with MVP features to ensure alignment

#### 3.2 Request User Approval for Files

After creating all files, present them to the user:
- Provide a summary of what was created
- Highlight key requirements and any critical dependencies identified
- Ask: "Please review the PRD documents. You can update or delete the files or let me know how to do it"

### 4. Finalize Stage

Once the user approves all files, you need to check all the files content, and if any files have been deleted understand the user's intent:

#### 4.1 Documentation Finalization
- Sync with `04-prd/README.md`, to remove any deleted files which the user doesn't want to have
- Ensure all files are complete and well-formatted
- Verify that requirements align with MVP scope and personas
- Confirm acceptance criteria are comprehensive and testable
- Check that all Mermaid diagrams render correctly
- Ensure no conflicts or gaps between functional and non-functional requirements

#### 4.2 Prepare for Next Stage
- Summarize key requirements for reference in later stages (UX, Architecture)
- Identify requirements that will impact UX design decisions
- Note technical requirements that will influence architecture choices
- Flag any requirements that may need clarification during development

#### 4.3 Announce Completion
Inform the user:
- "Stage 04 (PRD) is complete"
- Summary of deliverables created
- Key requirements and constraints identified
- "Ready to proceed to Stage 05 (UX) when you are"

## Role Communication

Based on the stage context and project details, pick up your roles from `dev-swarm/docs/dev-swarm-roles.md` to announce your actions before performing them using the following format:

**As a {Role} [and {Role}, ...], I will {action description}**

## Communication Pattern

This communication pattern ensures:
- **Transparency** - Users know exactly what you're doing and why
- **Human-in-the-loop oversight** - Users can intervene at key decision points
- **Role clarity** - Clear understanding of which expertise is being applied
- **Traceability** - Easy to track which role made which decisions

Always announce your role and action before:
- Reading and analyzing documents
- Creating new files or documents
- Making recommendations or decisions
- Requesting user approval
- Finalizing deliverables
