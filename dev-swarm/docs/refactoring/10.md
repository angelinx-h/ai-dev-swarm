# Stage 10 - Deployment

Deploy the fully developed and tested product to production environment, configure production infrastructure, set up monitoring and alerting, and prepare for launch including documentation and marketing readiness.

## Instructions

### 1. Context Review

Read all the files below to understand the design of this project so far:

- `ideas.md`
- `00-init-ideas/` - All markdown files
- `01-market-research/` - All markdown files
- `02-personas/` - All markdown files
- `03-mvp/` - All markdown files
- `04-prd/` - All markdown files
- `05-ux/` - All markdown files
- `06-architecture/` - All markdown files
- `07-tech-specs/` - All markdown files
- `08-devops/` - All markdown and config files
- `09-sprints/` - All markdown files

**Critical:** Review `08-devops/execution-plan.md` to identify any Part 2 items (deferred to Stage 10) that need to be executed before deployment.

### 2. Create Stage Proposal

Create the file `10-deployment/README.md` with the following content:

#### 2.1 Stage Goal

Brief the goal of this stage in 2-3 paragraphs:
- What this stage aims to achieve (production deployment, go-live readiness)
- Why proper deployment preparation is critical for product success
- How this stage builds upon all previous stages to deliver a working product
- What deliverables will be produced (live production system, documentation, launch plan)

#### 2.2 Deferred Infrastructure Review

Check `08-devops/execution-plan.md` Part 2 and list items that were deferred:
- Which infrastructure items need to be set up now
- What credentials/access is required
- Estimated costs for production infrastructure

#### 2.3 File Selection

Pick and list the file names from the options below that are most suitable for this project:

**Deployment Planning:**
- `deployment-plan.md` - Detailed deployment plan including sequence, dependencies, and timeline
- `production-config.md` - Production environment configuration (environment variables, feature flags)
- `deployment-diagram.mmd` - Mermaid diagram showing deployment architecture and flow
- `execution-plan.md` - Checklist of deployment tasks with pre-deployment and post-deployment sections

**Cloud Infrastructure (Production):**
- `aws-production-setup.md` - AWS production setup (EC2, RDS, S3, CloudFront, etc.)
- `runpod-production-setup.md` - RunPod GPU production setup (if applicable)
- `ssl-certificate-setup.md` - SSL/TLS certificate setup and renewal strategy
- `domain-dns-setup.md` - Domain registration and DNS configuration

**Operations & Reliability:**
- `monitoring-alerting.md` - Production monitoring, alerting rules, and on-call procedures
- `backup-strategy.md` - Backup schedules, retention policies, and disaster recovery plan
- `rollback-plan.md` - Rollback procedures for failed deployments
- `security-hardening.md` - Production security measures and hardening checklist
- `performance-optimization.md` - Performance tuning and optimization guide

**Verification & Quality:**
- `post-deployment-verification.md` - Smoke tests, health checks, and verification procedures
- `go-live-checklist.md` - Final checklist before going live

**Documentation:**
- `user-documentation.md` - End-user documentation and help guides
- `admin-documentation.md` - Admin/ops documentation for system management
- `api-documentation.md` - Public API documentation (if applicable)

**Launch & Marketing:**
- `marketing-readiness.md` - Marketing materials checklist (landing page, screenshots, copy)
- `launch-announcement.md` - Launch communication plan (social media, press release, email)

**Mobile App Store Release (if applicable):**
- `app-store-release.md` - Apple App Store submission process (screenshots, metadata, review guidelines)
- `google-play-release.md` - Google Play Store submission process (screenshots, metadata, content rating)
- `mobile-release-checklist.md` - Pre-submission checklist (app icons, privacy policy, age rating, etc.)

For each selected file, provide:
- Short description of what the file contains
- Why it's essential for this specific project
- What key information it should include

**Note:** Select files based on project complexity and launch requirements. Not all files may be necessary for every project.

#### 2.4 Request User Approval

Present the stage plan to the user and ask - Please check the Stage Proposal file in file `10-deployment/README.md`, and update it directly or tell me how to update it

### 3. Create Documentation

Once the user updates & approves the plan in `10-deployment/README.md`, read the file and understand user's update for the next step:

#### 3.1 Create All Planned Files

Create each file listed in the approved README.md within the `10-deployment/` folder:

- **For `.md` files:** Write comprehensive, well-structured documentation with step-by-step instructions
- **For `.mmd` files:** Create clear Mermaid diagrams showing deployment architecture and flows

**Quality Guidelines:**
- Base configurations on architecture and tech-specs from previous stages
- Include security best practices for production environment
- Document all environment variables and secrets required
- Provide clear rollback procedures for each deployment step
- Include verification steps after each major deployment action
- Reference sprint deliverables from `09-sprints/`
- Ensure monitoring covers all critical system components
- Document estimated costs for production infrastructure

#### 3.2 Request User Approval for Files

After creating all files, present them to the user:
- Provide a summary of what was created
- Highlight key deployment decisions
- List any credentials or access needed for deployment
- Ask: "Please review the deployment documentation. You can update or delete the files or let me know how to do it"

#### 3.3 Revise Based on Feedback

If the user requests changes:
- Update the files according to user feedback
- Re-present the updated files for approval
- Repeat until user approves all documentation

### 4. Finalize Documentation

Once the user approves all files, finalize the documentation:

#### 4.1 Documentation Finalization
- Sync with `10-deployment/README.md`, to remove any deleted files which the user doesn't want to have
- Ensure all files are complete and well-formatted
- Verify that deployment plan aligns with architecture design
- Confirm all setup steps are documented with prerequisites
- Check that all Mermaid diagrams render correctly

#### 4.2 Announce Documentation Complete
Inform the user:
- "Deployment documentation is complete and ready for execution"
- Summary of files created
- List of infrastructure to be provisioned

### 5. Create Execution Plan

Create `10-deployment/execution-plan.md` with deployment tasks:

#### 5.1 Execution Plan Structure

The execution plan file should have the following sections:

**Part 1: Pre-Deployment (Infrastructure from Stage 08)**
Items deferred from `08-devops/execution-plan.md` Part 2:
- [ ] AWS account & IAM setup (if not done)
- [ ] EC2 instance provisioning
- [ ] Production S3 bucket creation
- [ ] Production database setup (RDS or EC2 MySQL)
- [ ] Nginx reverse proxy configuration
- [ ] SSL certificate setup
- [ ] CD pipeline activation
- [ ] RunPod GPU setup (if applicable)
- [ ] Monitoring & alerting configuration
- [ ] Domain & DNS configuration

**Part 2: Deployment Execution**
- [ ] Final code merge to main/production branch
- [ ] Database migration execution
- [ ] Application deployment to production servers
- [ ] CDN configuration and cache warming
- [ ] DNS cutover (if changing domains)

**Part 3: Post-Deployment Verification**
- [ ] Health check endpoints verification
- [ ] Smoke test execution
- [ ] Performance baseline measurement
- [ ] Security scan execution
- [ ] Monitoring dashboard verification
- [ ] Alert notification test

**Part 4: Go-Live Activities**
- [ ] Remove maintenance mode / feature flags
- [ ] Enable production traffic
- [ ] Monitor error rates and performance
- [ ] Execute launch announcement plan
- [ ] Enable user registration (if applicable)

**Part 5: Mobile App Store Release (if applicable)**
Items for mobile app submission and release:
- [ ] Complete App Store Connect metadata (description, keywords, screenshots)
- [ ] Complete Google Play Console metadata (description, screenshots, content rating)
- [ ] Submit iOS app for App Store Review
- [ ] Submit Android app for Google Play Review
- [ ] Monitor review status and respond to any rejections
- [ ] Schedule or trigger app release after approval
- [ ] Verify app is live and downloadable on both stores

For each item, include:
- Description of what will be done
- Prerequisites (dependencies, credentials, approvals)
- Estimated duration
- Rollback procedure if it fails
- Success criteria

#### 5.2 Request User Decision

Ask user to:
1. Review `10-deployment/execution-plan.md`
2. Check/uncheck items they want to execute
3. Confirm deployment window/timing
4. Provide any required credentials
5. Confirm go-live approval

Ask: "Please review the deployment execution plan. Confirm which items to execute and provide any required credentials. Do you approve proceeding with deployment?"

### 6. Execute Deployment

Once user approves the execution plan, execute in order:

#### 6.1 Execute Deferred Infrastructure (Part 1)

If any items from Stage 08 Part 2 were deferred:
- Set up AWS production infrastructure
- Configure production database
- Set up SSL certificates
- Configure domain and DNS
- Activate CD pipeline
- Set up monitoring and alerting

**Checkpoint:** Verify all infrastructure is ready before proceeding to deployment.

#### 6.2 Execute Deployment (Part 2)

- Merge final code to production branch
- Run database migrations
- Deploy application to production servers
- Configure CDN
- Execute DNS cutover if needed

**Checkpoint:** Verify deployment succeeded before proceeding to verification.

#### 6.3 Execute Post-Deployment Verification (Part 3)

- Run health checks on all endpoints
- Execute smoke tests
- Measure performance baseline
- Run security scan
- Verify monitoring dashboards
- Test alert notifications

**Checkpoint:** All verification must pass before go-live.

#### 6.4 Execute Go-Live (Part 4)

- Remove maintenance mode
- Enable production traffic
- Monitor for errors (first 30 minutes critical)
- Execute launch announcement
- Enable user registration

#### 6.5 Execute Mobile App Store Release (Part 5, if applicable)

- Complete App Store Connect and Google Play Console metadata
- Upload final app builds (IPA for iOS, AAB for Android)
- Submit apps for review
- Monitor review status (iOS typically 24-48 hours, Android typically few hours)
- Handle any review rejections (update and resubmit)
- Release apps after approval
- Verify apps are live and downloadable

**Checkpoint:** Monitor app store reviews and ratings in first 24-48 hours.

**Execution Guidelines:**
- Execute steps in order, verify each before proceeding
- Document any issues and resolutions immediately
- Have rollback plan ready at each step
- Maintain communication with user throughout
- Stop and consult user if any critical issues arise

### 7. Update Documentation

After deployment, update documentation to reflect actual results:

#### 7.1 Document Deployment Results
- Record actual resource IDs, URLs, endpoints created
- Update configuration files with real production values (excluding secrets)
- Document any deviations from the original plan
- Note any issues encountered and resolutions
- Record baseline performance metrics

#### 7.2 Create Operations Runbook
- Document production URLs and access points
- Include troubleshooting steps for common issues
- Document monitoring and alerting thresholds
- Include escalation procedures
- Document backup and recovery procedures
- Include on-call rotation (if applicable)

#### 7.3 Finalize User Documentation
- Update user documentation with production URLs
- Verify all help guides are accurate
- Update API documentation with production endpoints

#### 7.4 Request Final Approval
- Present updated documentation to user
- Confirm production system is working as expected
- Ask: "Please verify the production deployment. Is the system working as expected?"

### 8. Complete Stage & Project

Once user confirms deployment is successful:

#### 8.1 Post-Launch Monitoring
- Monitor system for 24-48 hours after launch
- Track user signups and engagement
- Monitor error rates and performance
- Address any critical issues immediately

#### 8.2 Handover Documentation
- Ensure all documentation is complete and up-to-date
- Provide operations team with runbooks
- Document any known issues or limitations
- Create list of future improvements/tech debt

#### 8.3 Announce Completion
Inform the user:
- "Stage 10 (Deployment) is complete - Product is LIVE!"
- Production URL and access information
- Summary of infrastructure deployed
- Key metrics (if available)
- List of documentation delivered
- Recommended post-launch activities
- "Congratulations on your successful launch!"

## Role Communication

Based on the stage context and project details, pick up your roles from `dev-swarm/docs/dev-swarm-roles.md` to announce your actions before performing them using the following format:

**As a {Role} [and {Role}, ...], I will {action description}**

## Communication Pattern

This communication pattern ensures:
- **Transparency** - Users know exactly what is being deployed to production
- **Human-in-the-loop oversight** - Users approve each phase of deployment
- **Role clarity** - Clear understanding of which expertise is being applied
- **Traceability** - Easy to track deployment decisions and changes
- **Safety** - Multiple checkpoints before and after deployment
- **Accountability** - Clear ownership of deployment activities

Always announce your role and action before:
- Reading and analyzing documents
- Creating deployment documentation
- Making infrastructure decisions
- Requesting credentials or access
- Executing deployment commands
- Performing verification tests
- Announcing go-live status
- Finalizing deliverables
